<!DOCTYPE html>
<html lan="en">

<head>    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title> Birds of Aotearoa </title>
    
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@1,100&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" charset=""utf-8></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
</head>

<body>
    
    <header>
        <h1>Aoteroa Birds</h1> 
    </header>
    
    <aside>
        <form id="search">
            <input type="text" placeholder="Search Birds">
            <div class="custom-select">
                <select>
                    <option value="0">Conservation Status :</option>
                    <option value="1">Not Threatened</option>
                    <option value="2">Naturally Uncommon</option>
                    <option value="3">Relicit</option>
                    <option value="4">Recovering</option>
                    <option value="5">Declining</option>
                    <option value="6">Nationally Increasing</option>
                    <option value="7">Nationally Vulnerable</option>
                    <option value="8">Nationally Endangered</option>
                    <option value="9">Nationally Critical</option>
                    <option value="10">Data Deficient</option>
                </select>
            </div>
            
            <div class="sort-by">
                <select>
                    <option value="0">Sort by </option>
                    <option value="1">Lightest to heaviest</option>
                    <option value="2">Heaviest to lightest</option>
                    <option value="3">Smallest to Largest</option>
                    <option value="4">Largest to Smallest</option>
                </select>
            </div>
            
        </form>                 
        
    </aside>
    <main>
        <article class="bird">
            <header>
                <img />
                <hgroup>
                    <h2>Maori Name</h2>
                    <p>Credit</p>
                </hgroup>
                <span class="status color"></span>
            </header>
            <h3>English name</h3>
            <dl>
                <dt>Key</dt>
                <dd>Value</dd>
                
                <dt>Key</dt>
                <dd>Value</dd>
            </dl>
        </article>
    </main>
    
    
    <script>
        
        // Variable to hold the locations
        var dataArr = {};
        // Load the locations once, on page-load.
        $(function() { 
            $.getJSON( '"api/videoData.js"').done(function(data) {
                window.dataArr = data.pages;
            }).fail(function(data) {
                console.log('no results found');
            });
        });
        // Respond to any input change, and show first few matches
        $("#search").on('keypress keyup change input', function() { 
            var arrival = $(this).val().toLowerCase();
            $('#matches').text(!arrival.length ? '' : 
            dataArr.filter(function(place) {
                // look for the entry with a matching `code` value
                return (place.title.toLowerCase().indexOf(arrival) !== -1);
            }).map(function(place) {
                // get titles of matches
                return place.english_name;
            }).join('\n')); // create one text with a line per matched title
        });
        
        
        
        /*create the drop down status bar*/
        var x, i, j, l, ll, selElmnt, a, b, c;
        /* Look for any elements with the class "custom-select": */
        x = document.getElementsByClassName("custom-select");
        l = x.length;
        for (i = 0; i < l; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            ll = selElmnt.length;
            /* For each element, create a new DIV that will act as the selected item: */
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);
            /* For each element, create a new DIV that will contain the option list: */
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 1; j < ll; j++) {
                /* For each option in the original select element,
                create a new DIV that will act as an option item: */
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                c.addEventListener("click", function(e) {
                    /* When an item is clicked, update the original select box,
                    and the selected item: */
                    var y, i, k, s, h, sl, yl;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    sl = s.length;
                    h = this.parentNode.previousSibling;
                    for (i = 0; i < sl; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {
                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;
                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            yl = y.length;
                            for (k = 0; k < yl; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();
                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function(e) {
                /* When the select box is clicked, close any other select boxes,
                and open/close the current select box: */
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
            });
        }
        
        function closeAllSelect(elmnt) {
            /* A function that will close all select boxes in the document,
            except the current select box: */
            var x, y, i, xl, yl, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            xl = x.length;
            yl = y.length;
            for (i = 0; i < yl; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i)
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < xl; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
        }
        
        /* If the user clicks anywhere outside the select box,
        then close all select boxes: */
        document.addEventListener("click", closeAllSelect);
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        /*create the drop down status bar*/
        var x, i, j, l, ll, selElmnt, a, b, c;
        /* Look for any elements with the class "sort-byt": */
        x = document.getElementsByClassName("sort-by");
        l = x.length;
        for (i = 0; i < l; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            ll = selElmnt.length;
            /* For each element, create a new DIV that will act as the selected item: */
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);
            /* For each element, create a new DIV that will contain the option list: */
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 1; j < ll; j++) {
                /* For each option in the original select element,
                create a new DIV that will act as an option item: */
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                c.addEventListener("click", function(e) {
                    /* When an item is clicked, update the original select box,
                    and the selected item: */
                    var y, i, k, s, h, sl, yl;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    sl = s.length;
                    h = this.parentNode.previousSibling;
                    for (i = 0; i < sl; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {
                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;
                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            yl = y.length;
                            for (k = 0; k < yl; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();
                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function(e) {
                /* When the select box is clicked, close any other select boxes,
                and open/close the current select box: */
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
            });
        }
        
        function closeAllSelect(elmnt) {
            /* A function that will close all select boxes in the document,
            except the current select box: */
            var x, y, i, xl, yl, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            xl = x.length;
            yl = y.length;
            for (i = 0; i < yl; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i)
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < xl; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
        }
        
        /* If the user clicks anywhere outside the select box,
        then close all select boxes: */
        document.addEventListener("click", closeAllSelect);

        // Assuming you have the JSON data containing bird information
const birdsData = /* Your JSON data here */;

function generateBirdHTML(bird) {
  const main = document.createElement("main");
  const article = document.createElement("article");
  const header = document.createElement("header");
  const img = document.createElement("img");
  const hgroup = document.createElement("hgroup");
  const h2 = document.createElement("h2");
  const p = document.createElement("p");
  const statusSpan = document.createElement("span");
  const h3 = document.createElement("h3");
  const dl = document.createElement("dl");

  // Set content and attributes
  img.src = bird.photo.source;
  h2.textContent = bird.primary_name;
  p.textContent = `Credit: ${bird.photo.credit}`;
  statusSpan.className = `status ${bird.status.toLowerCase()}`;
  h3.textContent = bird.english_name;

  // Loop through the bird size properties and add them to the definition list (dl)
  for (const key in bird.size) {
    if (bird.size.hasOwnProperty(key)) {
      const dt = document.createElement("dt");
      dt.textContent = key;
      const dd = document.createElement("dd");
      dd.textContent = `${bird.size[key].value} ${bird.size[key].units}`;
      dl.appendChild(dt);
      dl.appendChild(dd);
    }
  }

  // Build the HTML structure
  hgroup.appendChild(h2);
  hgroup.appendChild(p);
  header.appendChild(img);
  header.appendChild(hgroup);
  header.appendChild(statusSpan);
  article.appendChild(header);
  article.appendChild(h3);
  article.appendChild(dl);
  main.appendChild(article);

  return main;
}

// Assuming you have an array of birds in the JSON data
const birdsArray = birdsData.birds;

// Loop through the birds array and generate the HTML for each bird
const container = document.getElementById("birds-container"); // Assuming you have a container element to display the birds
birdsArray.forEach((bird) => {
  const birdHTML = generateBirdHTML(bird);
  container.appendChild(birdHTML);
});


function generateBirdHTML(bird) {
  // (Remaining code remains the same as provided earlier)
}

// Function to fetch the JSON data from a local file
async function fetchBirdsData() {
  try {
    const response = await fetch("birds.json"); // Replace "birds.json" with the actual path to your JSON file
    if (!response.ok) {
      throw new Error("Failed to fetch birds data.");
    }
    return await response.json();
  } catch (error) {
    console.error("Error fetching birds data:", error);
    return null;
  }
}

// Main function to generate HTML for birds from the fetched JSON data
async function generateBirdsHTML() {
  const container = document.getElementById("birds-container"); // Assuming you have a container element to display the birds

  const birdsData = await fetchBirdsData();
  if (birdsData && birdsData.birds && Array.isArray(birdsData.birds)) {
    const birdsArray = birdsData.birds;

    birdsArray.forEach((bird) => {
      const birdHTML = generateBirdHTML(bird);
      container.appendChild(birdHTML);
    });
  } else {
    console.error("Invalid birds data format.");
  }
}

// Call the main function to generate the birds' HTML
generateBirdsHTML();


<!-- Assuming you have an HTML structure like this with an empty <main> element -->
<main id="birds-container"></main>

function generateBirdHTML(bird) {
  // (Remaining code remains the same as provided earlier)
}

// Function to fetch the JSON data from a local file
async function fetchBirdsData() {
  try {
    const response = await fetch("birds.json"); // Replace "birds.json" with the actual path to your JSON file
    if (!response.ok) {
      throw new Error("Failed to fetch birds data.");
    }
    return await response.json();
  } catch (error) {
    console.error("Error fetching birds data:", error);
    return null;
  }
}

// Main function to generate HTML for birds from the fetched JSON data
async function generateBirdsHTML() {
  const container = document.getElementById("birds-container"); // Get the main container

  const birdsData = await fetchBirdsData();
  if (birdsData && birdsData.birds && Array.isArray(birdsData.birds)) {
    const birdsArray = birdsData.birds;

    birdsArray.forEach((bird) => {
      const birdHTML = generateBirdHTML(bird);
      container.appendChild(birdHTML);
    });
  } else {
    console.error("Invalid birds data format.");
  }
}

// Call the main function to generate the birds' HTML
generateBirdsHTML();

    </script>
    
</body>


</html>  